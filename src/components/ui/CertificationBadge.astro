---
/**
 * CertificationBadge â€” credential card with pixel design.
 * Sharp edges, pixel border, accent icon container. Optional link to credential (e.g. Credly).
 */
interface Props {
  title: string;
  issuer: string;
  date: Date;
  credentialUrl?: string;
}

const { title, issuer, date, credentialUrl } = Astro.props;

const formatDate = (d: Date) => {
  return new Date(d).toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
};
---

<div class="flex flex-col items-center gap-3 p-5 border-2 border-[var(--border-default)] bg-[var(--bg-surface)] hover:border-[var(--accent)] hover:shadow-[2px_2px_0_0_var(--accent)] transition-all group">
  {credentialUrl ? (
    <a
      href={credentialUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="flex flex-col items-center gap-3 no-underline text-inherit w-full focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--focus-ring)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--bg-primary)]"
      aria-label={`View ${title} credential on Credly`}
    >
      <div class="w-10 h-10 flex items-center justify-center bg-[var(--accent)] text-[var(--bg-primary)]">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
          <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5.951-1.429 5.951 1.429a1 1 0 001.169-1.409l-7-14z"/>
        </svg>
      </div>
      <h4 class="font-heading font-semibold text-[var(--text-primary)] text-center text-sm leading-tight">{title}</h4>
      <p class="font-mono text-xs text-[var(--text-muted)] text-center mb-0">{issuer}</p>
      <p class="font-mono text-xs text-[var(--text-subtle)] mb-0">{formatDate(date)}</p>
    </a>
  ) : (
    <>
      <div class="w-10 h-10 flex items-center justify-center bg-[var(--accent)] text-[var(--bg-primary)]">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
          <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5.951-1.429 5.951 1.429a1 1 0 001.169-1.409l-7-14z"/>
        </svg>
      </div>
      <h4 class="font-heading font-semibold text-[var(--text-primary)] text-center text-sm leading-tight">{title}</h4>
      <p class="font-mono text-xs text-[var(--text-muted)] text-center mb-0">{issuer}</p>
      <p class="font-mono text-xs text-[var(--text-subtle)] mb-0">{formatDate(date)}</p>
    </>
  )}
</div>
